<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>
      <div class="header-title">
        <ion-icon name="game-controller"></ion-icon>
        <span>Jogo da Forca</span>
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="hangman-container" *ngIf="currentWord">
    
    <!-- Placar -->
    <div class="score-board">
      <ion-card class="score-card">
        <ion-card-content>
          <div class="score-item">
            <ion-icon name="trophy" color="warning"></ion-icon>
            <div class="score-info">
              <span class="score-label">Pontos</span>
              <span class="score-value">{{ score }}</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
      
      <ion-card class="score-card">
        <ion-card-content>
          <div class="score-item">
            <ion-icon name="game-controller" color="secondary"></ion-icon>
            <div class="score-info">
              <span class="score-label">Jogos</span>
              <span class="score-value">{{ gamesPlayed }}</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- InformaÃ§Ãµes do jogo -->
    <ion-card class="game-info-card glass-card">
      <ion-card-content>
        <div class="category-badge">
          <ion-icon name="folder" color="secondary"></ion-icon>
          <span>{{ currentWord.category }}</span>
        </div>
        <div class="hint-section">
          <ion-icon name="bulb" color="warning"></ion-icon>
          <p><strong>Dica:</strong> {{ currentWord.hint }}</p>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Ãrea do jogo -->
    <div class="game-area">
      <!-- Desenho da forca -->
      <ion-card class="drawing-card glass-card">
        <ion-card-content>
      <div class="hangman-drawing">
        <div class="gallows">
          <div class="base"></div>
          <div class="pole"></div>
          <div class="beam"></div>
          <div class="rope" [class.visible]="wrongGuesses >= 1"></div>
          <div class="head" [class.visible]="wrongGuesses >= 1"></div>
          <div class="body" [class.visible]="wrongGuesses >= 2"></div>
          <div class="left-arm" [class.visible]="wrongGuesses >= 3"></div>
          <div class="right-arm" [class.visible]="wrongGuesses >= 4"></div>
          <div class="left-leg" [class.visible]="wrongGuesses >= 5"></div>
          <div class="right-leg" [class.visible]="wrongGuesses >= 6"></div>
            </div>
        </div>
        <div class="attempts-counter">
            <ion-badge [color]="wrongGuesses >= 5 ? 'danger' : wrongGuesses >= 3 ? 'warning' : 'success'">
              <ion-icon name="close-circle-outline"></ion-icon>
            {{ wrongGuesses }} / {{ maxWrongGuesses }} erros
          </ion-badge>
        </div>
        </ion-card-content>
      </ion-card>

      <!-- Palavra -->
      <div class="word-display">
        <div 
          class="letter-box" 
          *ngFor="let letter of displayWord; let i = index"
          [class.revealed]="letter !== '_'"
        >
          {{ letter }}
        </div>
      </div>
    </div>

    <!-- Teclado -->
    <ion-card class="keyboard-card glass-card" *ngIf="!gameOver">
      <ion-card-content>
        <div class="keyboard">
      <ion-button
        *ngFor="let letter of alphabet"
        [disabled]="isLetterGuessed(letter)"
            [class]="getLetterClass(letter)"
        (click)="guessLetter(letter)"
        class="keyboard-button"
        size="small"
            shape="round"
      >
        {{ letter }}
      </ion-button>
    </div>
      </ion-card-content>
    </ion-card>

    <!-- Resultado -->
    <div class="result-container" *ngIf="gameOver">
      <ion-card [class]="'result-card ' + (won ? 'won' : 'lost')">
      <ion-card-content>
        <div class="result-content">
            <div class="result-icon-wrapper">
              <ion-icon [name]="won ? 'trophy' : 'sad'" class="result-icon"></ion-icon>
            </div>
            <h2>{{ won ? 'ðŸŽ‰ ParabÃ©ns!' : 'ðŸ˜¢ Que pena!' }}</h2>
            <p class="result-message" *ngIf="won">VocÃª acertou a palavra!</p>
            <p class="result-message" *ngIf="!won">A palavra era:</p>
            <div class="word-reveal" *ngIf="!won">
              <strong>{{ currentWord.word }}</strong>
            </div>
            
          <div class="result-actions">
              <ion-button expand="block" (click)="playAgain()" color="secondary" size="large">
                <ion-icon name="refresh" slot="start"></ion-icon>
              Jogar Novamente
            </ion-button>
              <ion-button expand="block" (click)="goBack()" fill="outline" color="light" size="large">
                <ion-icon name="home" slot="start"></ion-icon>
              Voltar ao Menu
            </ion-button>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
    </div>

  </div>
</ion-content>
